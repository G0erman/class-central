<!DOCTYPE html>

{% set showProfileEditModal = false %}
{% for flashMessage in app.session.flashbag.get('show_post_signup_profile_modal') %}
    {% set showProfileEditModal = true %}
{% endfor %}

<html lang="en">
{% if app.request.get('_route') == 'ClassCentralSiteBundle_homepage' %}
    <head itemscope itemtype="http://schema.org/WebSite">
{% else %}
    <head>
{% endif %}

    <meta name="google-signin-client_id" content="543074773853-5o4th7sqent0dc5f0slvn0cakr152fpv.apps.googleusercontent.com">

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    {%  block headmeta %}
    {% endblock %}

    <link rel="shortcut icon"  type="image/x-icon" href="{{ asset('bundles/classcentralsite/slashpixel/images/favicon.ico') }}">
    <link rel="icon"  type="image/x-icon" href="{{ asset('bundles/classcentralsite/slashpixel/images/favicon.ico') }}">
    <link rel="search" type="application/opensearchdescription+xml" href="{{ asset('bundles/classcentralsite/xml/opensearch.xml') }}" title="Class Central MOOC search" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" href="{{ assetService.getBundledAssetFileName('cc.css') }}" />

    <!-- Google+ Direct connect -->
    <link href="https://plus.google.com/{{plusPageUrl}}" rel="publisher" />
    <script src="{{ '/webpack/modernizr.js' }}"></script>

    {{ include ('ClassCentralSiteBundle:Layouts/Tracking:head.html.twig') }}

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="{{ asset('bundles/classcentralsite/slashpixel/images/favicon.ico') }}"  />
</head>

<script>
    (function(d) {
        var config = {
                kitId: 'gdf6zoz',
                scriptTimeout: 3000,
                async: true
            },
            h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
    })(document);
</script>

<body>
<div class="siteWrap">

{% include 'ClassCentralSiteBundle:Helpers:sprites.svg.twig' %}

{% if page is defined %}
    {% render controller('ClassCentralSiteBundle:Navigation:index', {'page': page}) %}
{% else %}
    {% render controller('ClassCentralSiteBundle:Navigation:index', {'page':'admin'}) %}
{% endif %}
{%  block contentheader %}
{% endblock %}


{% block ccfullcontent %}
{% endblock %}

<div class="container cc-body-content">

    {%  block contentoutsideofccpage %}
    {% endblock %}

    <div class="cc-page">
        {# Content pages go here #}
        {% if breadcrumbs is defined and showDefaultBreadcrumb is not defined %}
            {% include 'ClassCentralSiteBundle:Helpers:breadcrumbs.html.twig' with {'breadcrumbs': breadcrumbs }%}
        {% endif %}
        {%  block content %}
        {% endblock %}
    </div>
    {%  block contentfooter %}
    {% endblock %}
</div> <!-- /container -->

{% block abovefooter %}
{% endblock %}


<footer>
    {% block footer %}
        <div class="container">
            <div class="row">
                <div class="col-md-2 col-sm-4 col-xs-4 link-column">
                    <h5 class="list-heading">Browse</h5>
                    <ul>
                        <li><a href="{{ path('random') }}" onmousedown="ga('send','event', 'Footer', 'Browse by - Random')" title="Are you feeling lucky?">Are you feeling lucky?</a></li>
                        <li><a href="{{ path('providers') }}" onmousedown="ga('send','event', 'Footer', 'Browse by - Providers')">Providers</a></li>
                        <li><a href="{{ path('universities') }}" onmousedown="ga('send','event', 'Footer', 'Browse by - Universities')">Universities</a></li>
                        <li><a href="{{ path('institutions') }}" onmousedown="ga('send','event', 'Footer', 'Browse by - Institutions')">Institutions</a></li>
                        <li><a href="{{ path('subjects') }}" onmousedown="ga('send','event', 'Footer', 'Browse by - Subjects')">Subjects</a></li>
                        <li><a href="{{ path('careers') }}" onmousedown="ga('send','event', 'Footer', 'Browse by - Careers')">Careers</a></li>
                        <li><a href="{{ path('languages') }}" onmousedown="ga('send','event', 'Footer', 'Browse by - Languages')">Languages</a></li>
                    </ul>
                </div>
                <div class="col-md-2 col-sm-4 col-xs-4 link-column">
                    <h5 class="list-heading">More</h5>
                    <ul>
                        <li><a href="https://www.class-central.com/report/moocs-for-credit/" onmousedown="ga('send','event', 'Footer', 'MOOCs for Credit')">MOOCs for Credit</a></li>
                        <li><a href="{{ path('credentials') }}" onmousedown="ga('send','event', 'Footer', 'Earn a Credential')">Earn A Credential</a></li>
                        <li><a href="https://www.class-central.com/report/mooc-tracker/" onmousedown="ga('send','event', 'Footer', 'What is MOOC Tracker?')">MOOC Tracker</a></li>
                        <li><a href="https://www.class-central.com/report/follow-button-for-education/" onmousedown="ga('send','event', 'Footer', 'Follow Button')">Follow Button</a></li>
                        <li><a href="/report" onmousedown="ga('send','event', 'Footer', 'MOOC Report')">MOOC Report</a></li>
                        <li><a href="{{ path('moocwatch') }}" onmousedown="ga('send','event', 'Footer', 'MOOCWatch')">MOOCWatch</a></li>
                        <li><a href="{{ path('ClassCentralSiteBundle_faq') }}" title="Frequently asked questions about MOOCs" onmousedown="ga('send','event', 'Footer', 'FAQ')">FAQ</a></li>
                        <li><a href="{{ path('ClassCentralSiteBundle_privacy') }}" onmousedown="ga('send','event', 'Footer', 'Privacy Policy')"> Privacy Policy</a></li>
                    </ul>
                </div>
                <div class="col-md-2 col-sm-4 col-xs-4 link-column">
                    <h5 class="list-heading">Connect</h5>
                    <ul>
                        <li><a href="mailto:contact@class-central.com" title="Class Central contact" onmousedown="ga('send','event', 'Footer', 'Connect','Email')">Email</a></li>
                        <li><a target="_blank" href="https://www.facebook.com/classcentral" onmousedown="ga('send','event', 'Footer', 'Connect','Facebook')">Facebook</a></li>
                        <li><a target="_blank" href="https://twitter.com/classcentral" onmousedown="ga('send','event', 'Footer', 'Connect','Twitter')">Twitter</a></li>
                        <li><a target="_blank" href="https://plus.google.com/+ClassCentral" onmousedown="ga('send','event', 'Footer', 'Connect','Google+')">Google+</a></li>
                        <li><a target="_blank" href="http://www.youtube.com/channel/UC0VOktSaVdm_YIUa4X5mBTQ" onmousedown="ga('send','event', 'Footer', 'Connect','Youtube')">Youtube</a></li>
                    </ul>
                </div>
                <div class="col-md-6 col-lg-4 col-sm-7 col-xs-8 newsletter-column">
                    <div class="newsletter-wrap">
                        <h4><span>Newsletter. </span>Never miss a course.</h4>
                        <form class="newsletter-subscription" action="{{ path('newsletter_subscribe_to',{code: 'mooc-report'}) }}" method="post">
                            <p>
                                <input type="email" placeholder="your@email.com" name="email" required>
                                <input type="submit" value="SUBSCRIBE">
                            </p>
                        </form>
                        <span class="reminder">No spam. Unsubscribe any time.</span>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-12">
                    <span class="copyright">Â©Class Central 2011-{{ "now"|date("Y") }}</span>
                </div>
            </div>
        </div>
    {% endblock %}

    {# Session flash messages #}
    <div class="flash-messages hidden">
        {% for type, messages in app.session.flashbag.all() %}
            {% for message in messages %}
                <div class="flash-message" data-type="{{ type }}" data-title="{{ message.title }}" data-delay="{{ message.delay }}">{{ message.text }}</div>
            {% endfor %}
        {% endfor %}
    </div>
</footer>
{% include 'ClassCentralSiteBundle:Helpers:search.template.html.twig' %}

<script>
   function signInWithGoogleButtonInit() {
       var googleUser = {};
       var startApp = function() {
           gapi.load('auth2', function(){
               // Retrieve the singleton for the GoogleAuth library and set up the client.
               auth2 = gapi.auth2.init({
                   client_id: '{{ google_auth_client_id }}',
                   cookiepolicy: 'single_host_origin',
                   // Request scopes in addition to 'profile' and 'email'
                   //scope: 'additional_scope'
               });

               var signInButtons = document.getElementsByClassName("sign-in-with-google");
               for(var i = 0; i < signInButtons.length; i++)
               {
                   attachSignin(signInButtons.item(i));
               }
           });
       };

       function attachSignin(element) {
           auth2.attachClickHandler(element, {},
               function(googleUser) {
                   CC.Class['User'].googleAuth(googleUser.getAuthResponse().id_token);
               }, function(error) {
                   //alert(JSON.stringify(error, undefined, 2));
               });
       }

       startApp();
   }
</script>


<script src="{{ assetService.getBundledAssetFileName('cc.js') }}"></script>

{% if is_granted('ROLE_ADMIN') %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.5.8/clipboard.min.js"></script>
{% endif %}

{# headroom #}
<style type="text/css">
    .headroom {position: fixed;top: 0;left: 0;right: 0;transition: all .2s ease-in-out;}
    .headroom--unpinned {top: -100px;}
    .headroom--pinned {top: 0;}
</style>

<script type="text/javascript">
    $(".navbar-fixed-top").headroom();
    $('body').on('touchstart.dropdown', '.dropdown-menu', function (e) { e.stopPropagation(); });

    {# show the user a personalization prompts #}
    {% if app.user and app.user.follows| length < 5 and app.request.attributes.get('_route') != 'user_profile' and app.request.attributes.get('_route') != 'review_new' and app.request.attributes.get('_route') !='credential_review' %}
        if(!isMobile.phone) {
            CC.Class['Follow'].showPersonalizationPrompt(20000);
        }
    {% endif %}

    {% if not app.user and app.request.attributes.get('_route') != 'review_new' and app.request.attributes.get('_route') !='credential_review'
    and app.request.attributes.get('_route') !='ClassCentralSiteBundle_homepage'
    %}
        if(!isMobile.phone ) {
            CC.Class['Signup'].showSignupPrompt(20000);
        }
    {% endif %}

    {% if showProfileEditModal %}
        $( document).ready(function () {
            CC.Class["Signup"].followSubjectOnboarding();
        });
    {% endif %}

    {# show the update follows modal if it contains query parameter update_follows #}
    {% if app.user and app.request.get('update_follows') is not empty  %}
        $( document).ready(function () {
              if (Cookies.get( 'follow_personalized_page_prompt' ) === undefined) {
                  CC.Class["Signup"].followSubjectOnboarding();
              }
        });
    {% endif %}

    {% block customJS %}
    {% endblock %}
</script>

{% include 'ClassCentralSiteBundle:Layouts/Tracking:footer.html.twig' %}

<script src="https://apis.google.com/js/api:client.js"></script>
<script>
    {% if not app.user %}
        signInWithGoogleButtonInit();
    {% endif %}
</script>

{# Rating popup box #}
{% include 'ClassCentralSiteBundle:Helpers:rating.popup.html.twig' %}

</div>

</body>
</html>
